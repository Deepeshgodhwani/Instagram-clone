class chatEngine{constructor(s,e,t,a){this.userId=t,this.chatroom=s,this.username=e,this.user2=a,this.socket=io.connect("http://localhost:5000"),this.username&&this.connectionHandler()}connectionHandler(){let s=this;s.user2&&$(`.Id${s.user2}`).css({backgroundColor:"rgb(239,239,239)"}),this.socket.on("connect",function(){let s=$("#chat-message-list");s.length&&s.stop().animate({scrollTop:$("#chat-message-list")[0].scrollHeight},1)}),s.socket.emit("setup",{userId:s.userId,name:s.username}),s.chatroom&&($(".send-Button").click(function(){$("#chat-message-list").stop().animate({scrollTop:$("#chat-message-list")[0].scrollHeight},500);let e=$("#text").val();if($("#text").val(""),""!=e){let t=$("<li>"),a="self-message";t.append($("<span>",{html:e})),t.addClass(a),$("#chat-message-list").append(t),s.socket.emit("send_message",{username:s.username,message:e,userId:s.userId,chatroom:s.chatroom})}}),$("#text").keypress(function(e){if("Enter"===e.key){$("#chat-message-list").stop().animate({scrollTop:$("#chat-message-list")[0].scrollHeight},500);let e=$("#text").val();if($("#text").val(""),""!=e){let t=$("<li>"),a="self-message";t.append($("<span>",{html:e})),t.addClass(a),$("#chat-message-list").append(t),s.socket.emit("send_message",{username:s.username,message:e,userId:s.userId,chatroom:s.chatroom})}}}),s.socket.on("receive_message",function(e){if(e.data.chatroom!==s.chatroom)return;$("#chat-message-list").stop().animate({scrollTop:$("#chat-message-list")[0].scrollHeight},1);let t=$("<li>");t.append($("<span>",{html:e.data.message})),t.addClass("other-message"),$("#chat-message-list").append(t)}))}}$("#page").click(function(){$(".searchResult").css({display:"none"}),$("#close").css({display:"none"}),$("#logo").css({display:"flex"}),$(".dropDown").css({display:"none"}),$(".loading").css({display:"none"}),$(".search").val("")});var offLoader=s=>{s?($(".loading-Gif2").css({display:"none"}),$("#chat-message-list").css({display:"block"}),$("#chat-message-list").stop().animate({scrollTop:$("#chat-message-list")[0].scrollHeight},1),$(".loading-Gif").css({display:"none"}),$("#recent-chat-list").css({display:"flex"})):($(".loading-Gif").css({display:"none"}),$("#recent-chat-list").css({display:"flex"}))};