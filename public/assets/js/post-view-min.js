const toggleBar=()=>{$("#message").css({display:"none"})},statusMessage=e=>{$("#message").text(e),$("#message").css({display:"flex"}),setTimeout(toggleBar,2e3)};var toggleLike=function(e){let a=$(`.${e}`),t=$("#red",a),s=$("#white",a);$.ajax({type:"get",url:$(a).attr("link"),success:function(e){let n=parseInt($(a).attr("data-likes"));1==e.data.Deleted?(n-=1,t.removeClass("fa-solid fa-heart"),t.addClass("fa-regular fa-heart"),$("div",a).removeClass("animate__animated animate__pulse"),s.removeClass("fa-solid fa-heart"),s.addClass("fa-regular fa-heart"),s.css({color:"black"}),t.css({color:"black"})):(n+=1,$("div",a).addClass("animate__animated animate__pulse"),s.removeClass("fa-regular fa-heart"),s.addClass("fa-solid fa-heart"),t.removeClass("fa-regular fa-heart"),t.addClass("fa-solid fa-heart"),s.css({color:"rgb(237, 73, 86)"}),t.css({color:"rgb(237, 73, 86)"})),$(a).attr("data-likes",n),$(`.${$(a).attr("commentId")}`).text(`${n} likes`)},error:function(e){statusMessage("Something went wrong. Please try again.")}})};$(".toggle-like-post").click(function(e){e.preventDefault();let a=this,t=$("#red",a),s=$("#white",a);$.ajax({type:"get",url:$(a).attr("href"),success:function(e){let n=parseInt($(a).attr("data-likes"));1==e.data.Deleted?(n-=1,t.removeClass("fa-solid fa-heart"),t.addClass("fa-regular fa-heart"),$("div",a).removeClass("animate__animated animate__pulse"),s.removeClass("fa-solid fa-heart"),s.addClass("fa-regular fa-heart"),s.css({color:"black"}),t.css({color:"black"})):(n+=1,$("div",a).addClass("animate__animated animate__pulse"),s.removeClass("fa-regular fa-heart"),s.addClass("fa-solid fa-heart"),t.removeClass("fa-regular fa-heart"),t.addClass("fa-solid fa-heart"),s.css({color:"rgb(237, 73, 86)"}),t.css({color:"rgb(237, 73, 86)"})),$(a).attr("data-likes",n),$("#likedd").text(`${n} likes`)},error:function(e){statusMessage("Something went wrong. Please try again.")}})}),$(".comment-forms").submit(function(e){e.preventDefault();$.ajax({type:"post",url:$(this).attr("action"),data:$(this).serialize(),success:function(e){$("#content").val(""),$(`<li class='comment${e.comment._id}' id="comments-list">\n          <div class="box" >\n              <img class="dp" src="${e.comment.user.avtar}">\n            <div id="comment"> \n              <p style="font-weight: 600;">\n                ${e.comment.user.username}\n              </p>\n              &nbsp;    \n              ${e.comment.content}\n              <div id="like-delete"> \n               <p style="font-size: 0.8rem;" class="${e.comment._id}">${e.comment.likes.length} likes</p> \n              ${e.userId==e.comment.user._id?`<div style="cursor:pointer; font-size: 0.8rem;" class="delete${e.comment._id}" onclick="toggleDelete('delete${e.comment._id}')" commentId=${e.comment._id}  link="/user/comment/delete/${e.comment._id}">Delete</div>`:"<div> </div>"}\n             </div>\n            </div>\n          </div>\n           <div style="cursor:pointer;" class="btn${e.comment._id}" onclick=toggleLike('btn${e.comment._id}') commentId="${e.comment._id}" data-likes="${e.comment.likes.length}"  link="/user/liked/toggle?id=${e.comment._id}&type=Comment">\n               <div id="unlike">      \n                  <i id="white" class="fa-regular fa-heart"></i>\n               </div>   \n           </div> \n        </li>`).insertAfter(".caption"),statusMessage("Comment Published")},error:function(e){statusMessage("Something went wrong. Please try again.")}})});var toggleDelete=function(e){let a=$(`.${e}`);$.ajax({type:"get",url:$(a).attr("link"),success:function(e){$(`.comment${e.commentId}`).remove(),statusMessage("Comment deleted")},error:function(e){statusMessage("Something went wrong. Please try again.")}})};$("#commentBtn").click(function(){$("#content").focus()}),$(".post-section").click(function(){$(".searchResult").css({display:"none"}),$("#close").css({display:"none"}),$("#logo").css({display:"flex"}),$(".loading-bar").css({display:"none"}),$(".search").val(""),$(".dropDown").css({display:"none"})});