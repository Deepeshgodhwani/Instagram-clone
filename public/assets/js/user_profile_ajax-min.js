{const o=()=>{$("#message").css({display:"none"})},e=e=>{$("#message").text(e),$("#message").css({display:"flex"}),setTimeout(o,2e3)};var toggleFollow=function(){$.ajax({type:"get",url:$(".follow-button").attr("link"),success:function(o){let e=$(".unFollowBox"),l=$(".followBox");if(e.length){e.empty();let o=parseInt(e.attr("followers"));o+=1;let l=$("#followers_count");$("b",l).text(o);let n=e.attr("profileId");e.append(`<div class="bundle">\n                    <a href="/user/direct/inbox?id=${n}"><button id="message-button">Message</button></a>\n                     <div onclick="toggleUnfollow()" class="unfollowLink" link="/user/tofollow/following?id=${n}"><button id="unfollow-">\n                        <img src="https://res.cloudinary.com/dynjwlpl3/image/upload/v1676112934/Instagram-clone/unfollow-1_uhaxnp.png" id="unfollow-logo1">\n                        <img  src="https://res.cloudinary.com/dynjwlpl3/image/upload/v1676112970/Instagram-clone/unfollow-2_abqxyo.png" id="unfollow-logo2">\n                    </button>\n                    </div>\n                    </div>`),e.attr("followers",o)}else{l.empty();let o=parseInt(l.attr("followers"));o+=1;let e=$("#followers_count");$("b",e).text(o);let n=l.attr("profileId");l.append(`<div class="bundle">\n                    <a href="/user/direct/inbox?id=${n}"><button id="message-button">Message</button></a>\n                     <div onclick="toggleUnfollow()" class="unfollowLink" link="/user/tofollow/following?id=${n}"><button id="unfollow-">\n                        <img src="https://res.cloudinary.com/dynjwlpl3/image/upload/v1676112934/Instagram-clone/unfollow-1_uhaxnp.png" id="unfollow-logo1">\n                        <img  src="https://res.cloudinary.com/dynjwlpl3/image/upload/v1676112970/Instagram-clone/unfollow-2_abqxyo.png" id="unfollow-logo2">\n                    </button>\n                    </div>\n                    </div>`),l.attr("followers",o)}},error:function(o){e("Something went wrong. Please try again.")}})},toggleUnfollow=function(){let o=$(".unfollowLink");$.ajax({type:"get",url:o.attr("link"),success:function(o){let e=$(".unFollowBox"),l=$(".followBox");if(e.length){e.empty();let o=parseInt(e.attr("followers"));o-=1;let l=$("#followers_count");$("b",l).text(o);let n=e.attr("profileId");e.append(`<div class="bundle">\n                   <div onclick="toggleFollow()" class="follow-button" style="text-decoration: none;" link="/user/tofollow/following?id=${n}" > <button  id="follow-">Follow</button></div>\n               </div>`),e.attr("followers",o)}else{l.empty();let o=parseInt(l.attr("followers"));o-=1;let e=$("#followers_count");$("b",e).text(o);let n=l.attr("profileId");l.append(`<div class="bundle">\n                   <div onclick="toggleFollow()" class="follow-button" style="text-decoration: none;" link="/user/tofollow/following?id=${n}" > <button  id="follow-">Follow</button></div>\n               </div>`),l.attr("followers",o)}},error:o=>{e("Something went wrong. Please try again.")}})},endProcess=function(){$(".outer-box").off("scroll touchmove mousewheel"),$(".profile-updation-container").off("scroll touchmove mousewheel"),$(".profile-updation-container").css({width:"0",height:"0",overflow:"hidden"}),$("#nav").css({zIndex:"99999"})},updateProfile=function(o){if("true"===o)return;$(".outer-box").on("scroll touchmove mousewheel",function(o){return o.preventDefault(),o.stopPropagation(),!1}),$(".profile-updation-container").on("scroll touchmove mousewheel",function(o){return o.preventDefault(),o.stopPropagation(),!1}),$(".profile-updation-container").css({width:"100%",height:"100vh",position:"fixed"}),$("#nav").css({zIndex:"0"}),$("#selection-button").change(function(o){if("image/jpeg"===o.target.files[0].type||"image/png"===o.target.files[0].type){var e=URL.createObjectURL(o.target.files[0]);let l=$(".picture-selection");l[0].submit(function(o){o.stopImmediatePropagation(),$.ajax({type:"post",url:$(l).attr("action"),success:function(o){$("#user-picture").remove(),$(`<img onclick="updateProfile(true)" id="user-picture" src="${e}" alt="<%=user.name%>" width="200px" height="200px">`).appendTo("#box-1")},error:function(o){console.log("error in changing profile using ajax",o)}})})}else endProcess()})};$("#selection-button2").change(function(o){URL.createObjectURL(o.target.files[0]);$("#form")[0].submit(function(o){})});const l=o=>{o?$(".Loading").css({display:"flex"}):$(".Loading").css({display:"none"})};var openList=(o,n)=>{let t=$(".search-Result");$(".outer-box").css({height:"100vh",overflow:"hidden"}),$(".outerLayer").css({position:"fixed"}),t.empty(),t.append("<img style='position: relative;  width: 20px; z-index: 10000;' class='Loading' src='../assets/images/loading.gif'/>"),l(!0),"followers"==o?($("#Heading").text("Followers"),$(".outerLayer").css({display:"flex"}),$.ajax({type:"get",url:`/user/tofollow/followers?id=${n}`,success:function(o){l(!1),o.length?t.append(o.map(function(o){return`<div class="users-detail">\n                           <a href="/user/profile/${o.followers._id}">\n                            <img id="user-avatar" src="${o.followers.avtar}"/>  \n                        </a>\n                        <a id="user-name2" href="/user/profile/${o.followers._id}">\n                            <p id="username">\n                            ${o.followers.username}\n                            </p>\n                            <p id="Name">\n                            ${o.followers.name}\n                            </p>\n                        </a>\n                    </div>`})):t.append('<div class=="noPost" style=" z-index: 100001; color: rgb(124, 124, 124);\n                        margin-left: 5.5rem; margin-top: 8rem; \n                       position: relative; " >0 followers</div>')},error:function(o){console.log("error in fetching users followers using ajax",o)}})):($("#Heading").text("Following"),$(".outerLayer").css({display:"flex"}),$(".outerLayer").off("scroll touchmove mousewheel"),$(".outer-box").off("scroll touchmove mousewheel"),$.ajax({type:"get",url:`/user/tofollow/userFollowings?id=${n}`,success:function(o){l(!1),o.length?t.append(o.map(function(o){return`<div class="users-detail">\n                        <a href="/user/profile/${o.following._id}">\n                            <img id="user-avatar" src="${o.following.avtar}"/>  \n                        </a>\n                        <a id="user-name2" href="/user/profile/${o.following._id}">\n                            <p id="username">\n                            ${o.following.username}\n                            </p>\n                            <p id="Name">\n                            ${o.following.name}\n                            </p>\n                        </a>\n                    </div>`})):t.append('<div class=="noPost" style=" z-index: 100001; color: rgb(124, 124, 124);\n                        margin-left: 6rem; margin-top: 8rem; \n                       position: relative; " >0 following</div>')},error:function(o){e("Something went wrong. Please try again.")}}))}}function closed(){$(".outerLayer").css({display:"none"}),$(".outer-box").css({height:"auto"}),$(".outerLayer").off("scroll touchmove mousewheel"),$(".outer-box").off("scroll touchmove mousewheel")}$(".outer-box").click(function(){$(".searchResult").css({display:"none"}),$("#close").css({display:"none"}),$("#logo").css({display:"flex"}),$(".loading-bar").css({display:"none"}),$(".search").val(""),$(".dropDown").css({display:"none"})});var toggleLoading=()=>{$(".postLoading").css({display:"none"}),$(".outer-box").css({display:"flex"})};